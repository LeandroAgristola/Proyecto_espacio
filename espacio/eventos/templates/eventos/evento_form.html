{% extends "management/layout_management.html" %}

{% block content %}
<div class="container my-4" id="formsEventos">
  <h2 class="mb-4">
    {% if form.instance.pk %}
      Editar Evento
    {% else %}
      Crear Evento
    {% endif %}
  </h2>

  <form method="post" enctype="multipart/form-data">
    {% csrf_token %}

    <!-- Título -->
    <div class="mb-3">
      <label for="{{ form.titulo.id_for_label }}" class="form-label">Título</label>
      {{ form.titulo }}
      {% if form.titulo.errors %}
        <div class="text-danger small">{{ form.titulo.errors|striptags }}</div>
      {% endif %}
    </div>

    <!-- Mostrar en la web -->
    <div class="form-check form-switch mb-3">
      {{ form.mostrar_en_web }}
      <label for="{{ form.mostrar_en_web.id_for_label }}" class="form-check-label">Mostrar en la web</label>
      {% if form.mostrar_en_web.errors %}
        <div class="text-danger small">{{ form.mostrar_en_web.errors|striptags }}</div>
      {% endif %}
    </div>

    <!-- Descripción -->
    <div class="mb-3">
      <label for="{{ form.descripcion.id_for_label }}" class="form-label">Descripción</label>
      {{ form.descripcion }}
      {% if form.descripcion.errors %}
        <div class="text-danger small">{{ form.descripcion.errors|striptags }}</div>
      {% endif %}
    </div>

    <!-- Fecha y Hora -->
    <div class="row">
      <div class="col-md-6 mb-3">
        <label for="{{ form.fecha.id_for_label }}" class="form-label">Fecha</label>
        {{ form.fecha }}
        {% if form.fecha.errors %}
          <div class="text-danger small">{{ form.fecha.errors|striptags }}</div>
        {% endif %}
      </div>
      <div class="col-md-6 mb-3">
        <label for="{{ form.hora.id_for_label }}" class="form-label">Hora</label>
        {{ form.hora }}
        {% if form.hora.errors %}
          <div class="text-danger small">{{ form.hora.errors|striptags }}</div>
        {% endif %}
      </div>
    </div>

 
    <!-- Cupos y Ubicación -->
    <div class="row">
      <div class="col-md-6 mb-3">
        <label for="{{ form.ubicacion.id_for_label }}" class="form-label">Ubicación</label>
        {{ form.ubicacion }}
        {% if form.ubicacion.errors %}
          <div class="text-danger small">{{ form.ubicacion.errors|striptags }}</div>
        {% endif %}
      </div>
      <div class="col-md-6 mb-3">
        <label for="{{ form.cupos.id_for_label }}" class="form-label">Cupos</label>
        {{ form.cupos }}
        {% if form.cupos.errors %}
          <div class="text-danger small">{{ form.cupos.errors|striptags }}</div>
        {% endif %}
      </div>
    </div>

      <!--Imagen -  -->
      <div class="mb-3">
      <label for="{{ form.imagen.id_for_label }}" class="form-label">Imagen</label>
      {{ form.imagen }}
      {% if form.imagen.errors %}
        <div class="text-danger small">{{ form.imagen.errors|striptags }}</div>
      {% endif %}
    </div>

    <!-- Precio -->
    <div class="mb-3">
      <label for="{{ form.precio.id_for_label }}" class="form-label">Precio</label>
      {{ form.precio }}
      {% if form.precio.errors %}
        <div class="text-danger small">{{ form.precio.errors|striptags }}</div>
      {% endif %}
    </div>

    <!-- Métodos de pago dinámicos -->
    <div class="mb-3" id="metodo-pago-container" style="display:none;">
      <label for="id_metodo_pago" class="form-label">Método de Pago</label>
      {{ form.metodo_pago }}
      {% if form.metodo_pago.errors %}
        <div class="text-danger small">{{ form.metodo_pago.errors|striptags }}</div>
      {% endif %}
    </div>

    <div class="mb-3" id="link-pago-container" style="display:none;">
      <label for="id_link_pago" class="form-label">Link de pago</label>
      {{ form.link_pago }}
      {% if form.link_pago.errors %}
        <div class="text-danger small">{{ form.link_pago.errors|striptags }}</div>
      {% endif %}
    </div>

    <!-- Botones -->
    <div class="d-flex gap-2">
      <button type="submit" class="btn btn-success">Guardar</button>
      <a href="{% url 'eventos_admin:lista_eventos' %}" class="btn btn-secondary">Cancelar</a>
    </div>
  </form>
</div>

{% load static %}
<script src="{% static 'js/metodo_pago.js' %}"></script>
{% endblock %}